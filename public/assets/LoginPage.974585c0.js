import{b as F,x as w,j as I,E as q,F as j,m as k,h as z,f as A,g as R,G as $,H as P,z as D,I as L,J as M,K as N,L as O,o as T,c as G,w as m,a as l,Q as K,M as y,N as Q,O as x,P as U,R as H}from"./index.38628778.js";import{Q as J}from"./QPage.aad4bd1e.js";import{u as W}from"./use-quasar.00084d0c.js";import{T as X}from"./TGCLoading.c773ee9a.js";var Y=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(u,{slots:v,emit:g}){const _=R(),n=w(null);let a=0;const r=[];function p(e){const c=typeof e=="boolean"?e:u.noErrorFocus!==!0,b=++a,V=(t,s)=>{g("validation"+(t===!0?"Success":"Error"),s)},C=t=>{const s=t.validate();return typeof s.then=="function"?s.then(i=>({valid:i,comp:t}),i=>({valid:!1,comp:t,err:i})):Promise.resolve({valid:s,comp:t})};return(u.greedy===!0?Promise.all(r.map(C)).then(t=>t.filter(s=>s.valid!==!0)):r.reduce((t,s)=>t.then(()=>C(s).then(i=>{if(i.valid===!1)return Promise.reject(i)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return b===a&&V(!0),!0;if(b===a){const{comp:s,err:i}=t[0];if(i!==void 0&&console.error(i),V(!1,s),c===!0){const E=t.find(({comp:B})=>typeof B.focus=="function"&&$(B.$)===!1);E!==void 0&&E.comp.focus()}}return!1})}function o(){a++,r.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function f(e){e!==void 0&&P(e);const c=a+1;p().then(b=>{c===a&&b===!0&&(u.onSubmit!==void 0?g("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function d(e){e!==void 0&&P(e),g("reset"),D(()=>{o(),u.autofocus===!0&&u.noResetFocus!==!0&&h()})}function h(){L(()=>{if(n.value===null)return;const e=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),c=>c.tabIndex>-1);e!=null&&e.focus({preventScroll:!0})})}I(M,{bindComponent(e){r.push(e)},unbindComponent(e){const c=r.indexOf(e);c>-1&&r.splice(c,1)}});let S=!1;return q(()=>{S=!0}),j(()=>{S===!0&&u.autofocus===!0&&h()}),k(()=>{u.autofocus===!0&&h()}),Object.assign(_.proxy,{validate:p,resetValidation:o,submit:f,reset:d,focus:h,getValidationComponents:()=>r}),()=>z("form",{class:"q-form",ref:n,onSubmit:f,onReset:d},A(v.default))}});const Z={class:"form-group",style:{"padding-top":"30px"}},ee=y("img",{src:"images/ImagenEscuelaCruz.jpg",style:{width:"300px",height:"150px"}},null,-1),te=y("div",{class:"subtitle",style:{display:"flex","align-items":"center","justify-content":"center",color:"#b16655","font-weight":"bold",margin:"2% 0 2% 0"}}," Bienvenido ",-1),oe={style:{display:"flex","flex-direction":"column","justify-content":"center"}},ne={style:{display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}},ue={__name:"LoginPage",setup(u){const v=W(),g=N(),_=O(),n=w(null),a=w(null),r=async()=>{try{v.loading.show({spinner:X,delay:300}),await g.login(n.value,a.value),_.push("/admin"),n.value="",a.value=""}catch(o){console.log("error",o),o.error?p(o.error):o.errors?p(o.errors[0].msg):p()}finally{v.loading.hide()}},p=(o="Error en el servidor")=>{v.dialog({title:"Error",message:o})};return(o,f)=>(T(),G(J,{padding:"",style:{"min-height":"100%"}},{default:m(()=>[l(Y,{onSubmit:H(r,["prevent"]),style:{height:"100%"}},{default:m(()=>[l(K,{style:{"background-color":"white",width:"500px",height:"500px","text-align":"center","border-radius":"5px"}},{default:m(()=>[y("div",Z,[ee,te,y("div",oe,[l(Q,{color:"white",modelValue:n.value,"onUpdate:modelValue":f[0]||(f[0]=d=>n.value=d),square:"",standout:`${o.$primary}`,outlined:"",dense:"","bg-color":"white",style:{"padding-bottom":"20px","font-size":"15px",width:"100%"}},{prepend:m(()=>[l(x,{name:"mdi-account-outline",style:{color:"#b16655","font-size":"30px"}})]),append:m(()=>[l(x,{name:""})]),_:1},8,["modelValue","standout"]),l(Q,{color:"cpl-text",type:"password",modelValue:a.value,"onUpdate:modelValue":f[1]||(f[1]=d=>a.value=d),square:"",standout:`${o.$primary}`,outlined:"",dense:"","bg-color":"white",rules:[d=>d!==""||"Debe capturar la contrase\xF1a"],style:{"font-size":"15px",width:"100%"}},{prepend:m(()=>[l(x,{name:"mdi-lock-outline",style:{color:"#b16655","font-size":"30px"}})]),append:m(()=>[l(x,{name:""})]),_:1},8,["modelValue","standout","rules"])])]),y("div",ne,[l(U,{class:"btn btn-signin",label:"Ingresar",type:"submit"})])]),_:1})]),_:1},8,["onSubmit"])]),_:1}))}};export{ue as default};
