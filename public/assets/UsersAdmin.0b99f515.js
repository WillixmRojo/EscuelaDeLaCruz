import{ap as h,K as p,x as f,aq as n,o as y,T as _}from"./index.9c7161f9.js";import{u as g}from"./use-quasar.c996af25.js";import{T as i}from"./TGCLoading.8d837f45.js";h("user",()=>{const o=p(),s=g(),t=f([]);return{createUser:async e=>{var r;try{s.loading.show({spinner:i,delay:300});const a=e.user,c=e.email,l=e.rfc,d=e.cliente,u=e.idrol;return(await n({method:"POST",url:"/users",headers:{Authorization:"Bearer "+o.token},data:{usuario:a,email:c,rfc:l,cliente:d,idrol:u}})).data.newUser}catch(a){throw((r=a.response)==null?void 0:r.data)||a}finally{s.loading.hide()}},removeUser:async e=>{var r;try{s.loading.show({spinner:i,delay:300}),await n({method:"DELETE",url:`/users/${e}`,headers:{Authorization:"Bearer "+o.token}}),t.value=t.value.filter(a=>a.id!==e)}catch(a){throw((r=a.response)==null?void 0:r.data)||a}finally{s.loading.hide()}},modifiedUser:async e=>{var r;try{s.loading.show({spinner:i,delay:300}),await n({method:"PUT",url:`/users/${e.id}`,data:{usuario:e.usuario,rfc:e.rfc,email:e.email,idrol:e.idrol,rol:e.rol,dev_access:e.dev_access,beta_access:e.beta_access,prod_access:e.prod_access},headers:{Authorization:"Bearer "+o.token}}),t.value=t.value.map(a=>a.id===e.id?e:a);return}catch(a){throw((r=a.response)==null?void 0:r.data)||a}finally{s.loading.hide()}},getUsers:async()=>{var e;try{s.loading.show({spinner:i,delay:300});const r=await n({method:"GET",url:"/users",headers:{Authorization:"Bearer "+o.token}});return t.value=[...r.data.users],t.value}catch(r){console.log(((e=r.response)==null?void 0:e.data)||r)}finally{s.loading.hide()}}}});const m={class:"main-users-admin",style:{width:"100%",height:"100%",padding:"1%"}},S={__name:"UsersAdmin",setup(o){return(s,t)=>(y(),_("div",m))}};export{S as default};
